<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="text/css" http-equiv="Content-Style-Type"/>
<meta content="pandoc" name="generator"/>
<title>ofBook - C++ 11</title>
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
<link href="../style/bootstrap.min.css" rel="stylesheet">
<link href="../style/style.css" rel="stylesheet" type="text/css"/>
<link href="http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic|Merriweather:400,300,300italic,400italic,700,900,700italic,900italic" rel="stylesheet" type="text/css">
<script src="../javascript/jquery-1.8.3.min.js"></script>
<script src="../javascript/bootstrap.min.js"></script>
<script src="../javascript/navbar.js"></script>
</link></link></head>
<body>
<div class="banner">
<div class="content-wrapper">
<b>Work in progress!</b>
        This is a preliminary version of ofBook, a collaboratively written book about openFrameworks.  Please post any issues, suggestions, comments on our <a href="https://github.com/openframeworks/ofBook/" target="_blank">repo</a>.
    </div>
</div>
<div class="content-wrapper">
<nav role="navigation">
<ul id="nav-parts"><li class="group"><div class="groupTitle">Foreword</div><ul><li class="chapter"><div class="chapterTitle"><a href="foreword.html">foreword</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#책에관하여" target="_top">책에 관하여</a></li><li class="section"><a href="#credits" target="_top">Credits</a></li></ul></div></li></ul></li><li class="group"><div class="groupTitle">Basics</div><ul><li class="chapter"><div class="chapterTitle"><a href="of_philosophy.html">Philosophy</a></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="cplusplus_basics.html">C++ Language Basics</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#lookalive" target="_top">Look Alive!</a></li><li class="section"><a href="#iteration" target="_top">Iteration</a></li><li class="section"><a href="#compilingmyfirstapp" target="_top">Compiling My First App</a></li><li class="section"><a href="#beyondhelloworld" target="_top">Beyond Hello World</a></li><li class="section"><a href="#functions" target="_top">Functions</a></li><li class="section"><a href="#customfunctions" target="_top">Custom Functions</a></li><li class="section"><a href="#encapsulationofcomplexity" target="_top">Encapsulation of Complexity</a></li><li class="section"><a href="#variablespart1" target="_top">Variables (part 1)</a></li><li class="section"><a href="#conclusion" target="_top">Conclusion</a></li><li class="section"><a href="#ps" target="_top">PS.</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="setup_and_project_structure.html">oF structure</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#firstthingsfirst" target="_top">First things first</a></li><li class="section"><a href="#welcometoyournewkitchen" target="_top">Welcome to your new kitchen</a></li><li class="section"><a href="#runningexamples" target="_top">Running examples</a></li><li class="section"><a href="#offolderstructure" target="_top">oF folder structure</a></li><li class="section"><a href="#theofpantry" target="_top">The oF Pantry</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="intro_to_graphics.html">Graphics</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#brusheswithbasicshapes" target="_top">Brushes with Basic Shapes</a></li><li class="section"><a href="#brushesfromfreeformshapes" target="_top">Brushes from Freeform Shapes</a></li><li class="section"><a href="#movingtheworld" target="_top">Moving The World</a></li><li class="section"><a href="#nextsteps" target="_top">Next Steps</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="OOPs!.html">Ooops! = Object Oriented Programming + Classes</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#overview" target="_top">Overview</a></li><li class="section"><a href="#whatisobjectorientedprogramming" target="_top">What is Object Oriented Programming</a></li><li class="section"><a href="#howtobuildyourownclassessimpleclass" target="_top">How to build your own Classes (simple Class)</a></li><li class="section"><a href="#makeanobjectfromyourclass" target="_top">Make an Object from your Class</a></li><li class="section"><a href="#makeobjectsfromyourclass" target="_top">Make objects from your Class</a></li><li class="section"><a href="#makemoreobjectsfromyourclass" target="_top">Make more Objects from your Class</a></li><li class="section"><a href="#makeevenmoreobjectsfromyourclasspropertiesandconstructors" target="_top">Make even more Objects from your Class: properties and constructors</a></li><li class="section"><a href="#makeobjectsonthefly" target="_top">Make Objects on the fly</a></li><li class="section"><a href="#makinganddeleteasyouwishusingvectors" target="_top">Making and delete as you wish - using vectors</a></li><li class="section"><a href="#quickintrotopolymorphisminheritance" target="_top">Quick intro to polymorphism (inheritance)</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="how_of_works.html">how OF works</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#오픈프레임웍스코드의일반적인패턴설명" target="_top">오픈프레임웍스 코드의 일반적인 패턴 설명</a></li><li class="section"><a href="#setupupdatedraw" target="_top">setup, update, draw</a></li><li class="section"><a href="#클래스" target="_top">클래스</a></li><li class="section"><a href="#함수" target="_top">함수</a></li></ul></div></li></ul></li><li class="group"><div class="groupTitle">Approaches</div><ul><li class="chapter"><div class="chapterTitle"><a href="animation.html">Animation</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#background" target="_top">Background</a></li><li class="section"><a href="#animationinofusefulconcepts" target="_top">Animation in oF / useful concepts:</a></li><li class="section"><a href="#linearmovement" target="_top">Linear movement</a></li><li class="section"><a href="#functionbasedmovement" target="_top">Function based movement</a></li><li class="section"><a href="#simulation" target="_top">Simulation</a></li><li class="section"><a href="#wheretogofurther" target="_top">Where to go further</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="game_design.html">Experimental Game Development</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#howdogamedevelopersactuallymakegames" target="_top">How do game developers actually make games?</a></li><li class="section"><a href="#sowhatisoscanyway" target="_top">So what is OSC, anyway?</a></li><li class="section"><a href="#ourbasicgameandmakingitnotsobasic" target="_top">Our basic game–and making it not so basic</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="image_processing_computer_vision.html">image processing and computer vision</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#maybethereisamagicbullet" target="_top">Maybe There is a Magic Bullet</a></li><li class="section"><a href="#preliminariestoimageprocessing" target="_top">Preliminaries to Image Processing</a></li><li class="section"><a href="#이미지처리를얘기하기전에알아두어야할것들" target="_top">이미지처리를 얘기하기 전에 알아두어야 할것들</a></li><li class="section"><a href="#pointprocessingoperationsonimages" target="_top">Point Processing Operations on Images</a></li><li class="section"><a href="#acompleteworkflowbackgroundsubtraction" target="_top">A Complete Workflow: Background Subtraction</a></li><li class="section"><a href="#refinements" target="_top">Refinements</a></li><li class="section"><a href="#suggestionsforfurtherexperimentation" target="_top">Suggestions for Further Experimentation</a></li></ul></div></li></ul></li><li class="group"><div class="groupTitle">I/O</div><ul><li class="chapter"><div class="chapterTitle"><a href="hardware.html">Hardware</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#introduction" target="_top">introduction</a></li><li class="section"><a href="#소개" target="_top">소개</a></li><li class="section"><a href="#gettingstartedwithserialcommunication" target="_top">getting started with serial communication</a></li><li class="section"><a href="#시리얼통신시작하기" target="_top">시리얼 통신 시작 하기</a></li><li class="section"><a href="#digitalandanalogcommunication" target="_top">digital and analog communication</a></li><li class="section"><a href="#디지털과아날로그통신" target="_top">디지털과 아날로그 통신</a></li><li class="section"><a href="#usingserialforcommunicationbetweenarduinoandopenframeworks" target="_top">using serial for communication between arduino and openframeworks</a></li><li class="section"><a href="#lightsoncontrollinghardwareviadmx" target="_top">Lights On - controlling hardware via DMX</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="sound.html">Sound</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#gettingstartedwithsoundfiles" target="_top">Getting Started With Sound Files</a></li><li class="section"><a href="#gettingstartedwiththesoundstream" target="_top">Getting Started With the Sound Stream</a></li><li class="section"><a href="#why1to1" target="_top">Why -1 to 1?</a></li><li class="section"><a href="#timedomainvsfrequencydomain" target="_top">Time Domain vs Frequency Domain</a></li><li class="section"><a href="#reactingtoliveaudio" target="_top">Reacting to Live Audio</a></li><li class="section"><a href="#synthesizingaudio" target="_top">Synthesizing Audio</a></li><li class="section"><a href="#audiogotchas" target="_top">Audio Gotchas</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="network.html">Network</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#tcpvsudp" target="_top">TCP vs UDP</a></li><li class="section"><a href="#osc" target="_top">OSC</a></li></ul></div></li></ul></li><li class="group"><div class="groupTitle">Graphics</div><ul><li class="chapter"><div class="chapterTitle"><a href="openGL.html">Introducing OpenGL for OF</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#introducing" target="_top">Introducing</a></li><li class="section"><a href="#vertices" target="_top">Vertices</a></li><li class="section"><a href="#meshes" target="_top">Meshes</a></li><li class="section"><a href="#vbos" target="_top">VBOs</a></li><li class="section"><a href="#abasic3dscene" target="_top">A Basic 3D Scene</a></li><li class="section"><a href="#matrices" target="_top">Matrices</a></li><li class="section"><a href="#textures" target="_top">Textures</a></li><li class="section"><a href="#cameras" target="_top">Cameras</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="lines.html">drawing lines</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#소개" target="_top">소개 ...</a></li><li class="section"><a href="#선그리기" target="_top">선 그리기</a></li><li class="section"><a href="#약간의노이즈abitofnoise" target="_top">약간의 노이즈A bit of noise</a></li><li class="section"><a href="#aweboflines" target="_top">A web of lines</a></li><li class="section"><a href="#makeasmoothlineinmovementina3dspace" target="_top">Make a smooth line in movement in a 3D space</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="generativemesh.html">Basics of Generating Meshes from an Image</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#basicsofgeneratingmeshesfromanimage1" target="_top">Basics of Generating Meshes from an Image</a></li><li class="section"><a href="#basicsworkingwithofmesh" target="_top">Basics: Working with ofMesh</a></li><li class="section"><a href="#generativemeshusinganimagetodrivethecreationofamesh" target="_top">Generative Mesh: Using an image to drive the creation of a mesh</a></li><li class="section"><a href="#manipulationsaddingeffectsthatmodifythemesh" target="_top">Manipulations: Adding effects that modify the mesh</a></li><li class="section"><a href="#nextsteps" target="_top">Next Steps</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="advanced_graphics.html">Advanced graphics</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#dimmediatemodevsofpolylineofpath" target="_top">2D, immediate mode vs ofPolyline/ofPath</a></li><li class="section"><a href="#d" target="_top">3D</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="shaders.html">Introducing Shaders</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#introducing" target="_top">introducing</a></li><li class="section"><a href="#yourfirstshader" target="_top">Your first shader!</a></li><li class="section"><a href="#addinguniforms" target="_top">Adding Uniforms</a></li><li class="section"><a href="#addingsomeinteractivity" target="_top">Adding some interactivity</a></li><li class="section"><a href="#addingtextures" target="_top">Adding Textures</a></li><li class="section"><a href="#alphamasking" target="_top">Alpha Masking</a></li><li class="section"><a href="#multipletextures" target="_top">Multiple Textures</a></li><li class="section"><a href="#offbo" target="_top">ofFbo</a></li><li class="section"><a href="#texturesasdataegdisplacement" target="_top">Textures as Data (e.g. Displacement)</a></li><li class="section"><a href="#theendcongrats" target="_top">The End, Congrats!</a></li></ul></div></li></ul></li><li class="group selected"><div class="groupTitle">C++</div><ul><li class="chapter"><div class="chapterTitle"><a href="threads.html">threads</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#쓰레드란무엇이고언제사용해야하는가" target="_top">쓰레드란 무엇이고 언제 사용해야 하는가</a></li><li class="section"><a href="#ofthread" target="_top">ofThread</a></li><li class="section"><a href="#스레드와opengl" target="_top">스레드와 openGL</a></li><li class="section"><a href="#ofmutex" target="_top">ofMutex</a></li><li class="section"><a href="#externalthreadsanddoublebuffering" target="_top">External threads and double buffering</a></li><li class="section"><a href="#ofscopedlock" target="_top">ofScopedLock</a></li><li class="section"><a href="#pococondition" target="_top">Poco::Condition</a></li><li class="section"><a href="#conclusion" target="_top">Conclusion</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="memory.html">memory of C++</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#컴퓨터메모리와변수" target="_top">컴퓨터 메모리와 변수</a></li><li class="section"><a href="#스택변수함수내의변수vs오브젝트내의변수" target="_top">스택 변수, 함수내의 변수 vs 오브젝트내의 변수</a></li><li class="section"><a href="#포인터와레퍼런스" target="_top">포인터와 레퍼런스</a></li><li class="section"><a href="#힙heap영역에서의변수들" target="_top">힙(heap) 영역에서의 변수들</a></li><li class="section"><a href="#메모리구조배열과vector" target="_top">메모리 구조, 배열과 vector</a></li><li class="section"><a href="#다른메모리구조리스트와맵" target="_top">다른 메모리 구조, 리스트와 맵</a></li><li class="section"><a href="#스마트포인터" target="_top">스마트 포인터</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="stl_vector.html">Introduction to vectors</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#quickreview" target="_top">Quick Review:</a></li><li class="section"><a href="#declaringavector" target="_top">Declaring a vector</a></li><li class="section"><a href="#addingelementstoavector" target="_top">Adding elements to a vector</a></li><li class="section"><a href="#resize" target="_top">resize</a></li><li class="section"><a href="#assign" target="_top">assign</a></li><li class="section"><a href="#accessingelementsofavector" target="_top">Accessing elements of a vector</a></li><li class="section"><a href="#erasingelementsofavector" target="_top">Erasing elements of a vector</a></li><li class="section"><a href="#iterators" target="_top">Iterators</a></li><li class="section"><a href="#sortingandshufflingavector" target="_top">Sorting and shuffling a vector</a></li><li class="section"><a href="#vectorsofobjects" target="_top">Vectors of objects</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="stl_map.html">let's play with Map, std::map</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#소개map이무엇인가요" target="_top">소개 : map이 무엇인가요?</a></li><li class="section"><a href="#map에값삽입하기" target="_top">map에 값 삽입하기</a></li><li class="section"><a href="#map에서요소삭제하기" target="_top">map에서 요소 삭제하기</a></li><li class="section"><a href="#map을훑기" target="_top">map을 훑기</a></li><li class="section"><a href="#map에서요소찾기" target="_top">map에서 요소 찾기</a></li><li class="section"><a href="#map에오브젝트저장하기" target="_top">map에 오브젝트 저장하기</a></li><li class="section"><a href="#multimap이란무엇인가요" target="_top">multimap이란 무엇인가요?</a></li><li class="section"><a href="#다른유용한메소드들" target="_top">다른 유용한 메소드들</a></li><li class="section"><a href="#추가참고자료역자에의해추가됨" target="_top">추가 참고 자료 (역자에 의해 추가됨)</a></li></ul></div></li></ul><ul><li class="chapter selected"><div class="chapterTitle selected"><a href="c++11.html">C++ 11</a></div><div class="chapterContents selected"><ul><li class="section selected"><a href="#introduction" target="_top">Introduction</a></li><li class="section"><a href="#auto" target="_top">auto</a></li><li class="section"><a href="#forthingthings" target="_top">for (thing : things)</a></li><li class="section"><a href="#override" target="_top">override</a></li><li class="section"><a href="#lambdafunctions" target="_top">Lambda functions</a></li></ul></div></li></ul></li><li class="group"><div class="groupTitle">Advanced topics</div><ul><li class="chapter"><div class="chapterTitle"><a href="math.html">Math: From 1D to 4D</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#onedimensionusingchange" target="_top">One Dimension: Using Change</a></li><li class="section"><a href="#moredimensionssomelinearalgebra" target="_top">More Dimensions: Some Linear Algebra</a></li></ul></div></li></ul></li><li class="group"><div class="groupTitle">Platforms</div><ul><li class="chapter"><div class="chapterTitle"><a href="ios.html">ofxiOS</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#openframeworksoniosdevices" target="_top">OpenFrameworks on iOS devices.</a></li><li class="section"><a href="#intro" target="_top">Intro</a></li><li class="section"><a href="#introtoobjectivec" target="_top">Intro to Objective-C</a></li><li class="section"><a href="#underthehood" target="_top">Under the Hood</a></li><li class="section"><a href="#ofuikit" target="_top">OF &amp; UIKit</a></li><li class="section"><a href="#mediaplaybackandcapture" target="_top">Media Playback and Capture</a></li><li class="section"><a href="#lifehacks" target="_top">Life Hacks</a></li><li class="section"><a href="#appstore" target="_top">App Store</a></li><li class="section"><a href="#casestudies" target="_top">Case Studies</a></li></ul></div></li></ul></li><li class="group"><div class="groupTitle">Tools</div><ul><li class="chapter"><div class="chapterTitle"><a href="version_control_with_git.html">Version control with Git</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#whatisversioncontrolandwhyshouldyouuseit" target="_top">What is version control, and why should you use it?</a></li><li class="section"><a href="#differentversioncontrolsystems" target="_top">Different version control systems</a></li><li class="section"><a href="#introductiontogit" target="_top">Introduction to Git</a></li><li class="section"><a href="#popularguiclients" target="_top">Popular GUI clients</a></li><li class="section"><a href="#conclusion" target="_top">Conclusion</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="ofSketch.html">ofSketch</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#whatisofsketch" target="_top">What is ofSketch?</a></li><li class="section"><a href="#download" target="_top">Download</a></li><li class="section"><a href="#sketchformat" target="_top">Sketch Format</a></li><li class="section"><a href="#remotecoding" target="_top">Remote Coding</a></li><li class="section"><a href="#future" target="_top">Future</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="installation_up_4evr_macosx.html">Installation up 4evr</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#step1prepyoursoftwareandthecomputer" target="_top">Step 1: Prep your software and the computer</a></li><li class="section"><a href="#step2bootintoyoursoftware" target="_top">Step 2: Boot into your software</a></li><li class="section"><a href="#step3keepitupchamp" target="_top">Step 3: Keep it up (champ!)</a></li><li class="section"><a href="#step4rebootperiodically" target="_top">Step 4: Reboot periodically</a></li><li class="section"><a href="#step5checkinonitfromafar" target="_top">Step 5: Check in on it from afar.</a></li><li class="section"><a href="#step6testtesttest" target="_top">Step 6: Test, test, test.</a></li><li class="section"><a href="#additionaltipslogging" target="_top">Additional Tips: Logging</a></li><li class="section"><a href="#memoryleakmurderer" target="_top">Memory leak murderer</a></li><li class="section"><a href="#alternateresources" target="_top">Alternate resources:</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="installation_up_4evr_linux.html">installation up4ever - linux</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#몇가지추가적인팁" target="_top">몇가지 추가적인 팁:</a></li></ul></div></li></ul></li><li class="group"><div class="groupTitle">Case studies</div><ul><li class="chapter"><div class="chapterTitle"><a href="project_eva.html">Choreographies for Humans and Stars</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#projectoverview" target="_top">Project Overview</a></li><li class="section"><a href="#ideationandprototyping" target="_top">Ideation and Prototyping</a></li><li class="section"><a href="#findingthetechnicalsolutions" target="_top">Finding the Technical Solutions</a></li><li class="section"><a href="#developingthevisualizationsoftware" target="_top">Developing the Visualization Software</a></li><li class="section"><a href="#failsafesanddirtyfixes" target="_top">Fail-safes and dirty fixes</a></li><li class="section"><a href="#resultsandreception" target="_top">Results and Reception</a></li></ul></div></li></ul><ul><li class="chapter"><div class="chapterTitle"><a href="project_joel.html">Anthropocene</a></div><div class="chapterContents"><ul><li class="section selected"><a href="#theproject" target="_top">The Project</a></li><li class="section"><a href="#development" target="_top">Development</a></li><li class="section"><a href="#showtime" target="_top">Show time</a></li><li class="section"><a href="#postevent" target="_top">Post Event</a></li><li class="section"><a href="#teamandcredits" target="_top">Team and Credits</a></li><li class="section"><a href="#hardwareselection" target="_top">Hardware selection</a></li></ul></div></li></ul></li></ul>
</nav>
<div class="chapter-content">
<h1 id="c-11">C++ 11</h1>
<p><em>by <a href="http://www.kimchiandchips.com/" target="_blank">Elliot Woods</a></em></p>
<h2 id="introduction">Introduction</h2>
<p>C++ is a pretty old language, it's been around since 1983, and perhaps because of that (but certainly for many other reasons), it is often seen as archaic, obtuse, or perhaps just plain out of touch by today's standards. Contrary to this, many people believe that it is still offers the best balance of performance and clarity on the coding high street, and (in part thanks to the success of Unix and its mates) has an incredibly strong ecosystem of 3rd party libraries, device support and general acceptance, even up to the point where current shader languages and CUDA use C++ as their language of choice.</p>
<p>Some more modern languages (such as JavaScript and C#) make programs which run in a very different way to C/C++. They have a 'virtual machine', which is a very different type of computer than the one which crunches electronic signals on a circuit board. The virtual machine receives and processes program instructions like a real machine, but allows for all sorts of ideas which don't directly translate to silicon electronics, such as dynamic typing and reflection. The virtual machine abstracts the constraints of the processor away from the thinking of the programmer.</p>
<p>C/C++ does not have a virtual machine, which (for the time being) often gives it a performance edge over these newer languages. It is quite strict in that ultimately the C code itself (somewhere down the chain) translates 1:1 with physical processor instructions, the design of the language is inflexible in this way, but clinging to this is the achievement of C++, that code can be both understood naturally by a human, and clearly translate to machine code.</p>
<p>In this chapter we'll look at some of the new patterns in the C++ language introduced in C++11, which retain this promise whilst offering new ways of writing code.</p>
<h2 id="auto"><code>auto</code></h2>
<p>Perhaps the most used, and simplest new pattern in C++11 is <code>auto</code>. You'll love it. And probably won't remember life without it after a day or 2. Consider the following...</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp">ofRectangle myRectangle = ofGetCurrentViewport();
ofVec2f rectangleCenter = myRectangle.getCenter();
<span class="dt">float</span> rectangleCenterX = rectangleCenter.x;</code></pre>
<p>In this code block, we are declaring 3 variables: * <code>myRectangle</code> * <code>rectangleCenter</code> * <code>rectangleCenterX</code></p>
<p>On each line of code we are:</p>
<ol style="list-style-type: decimal">
<li>Getting a variable on the right hand side. which is of a certain type (<code>ofRectangle</code>, <code>ofVec2f</code>, <code>float</code> respectively)</li>
<li>Declaring a new variable which is explicitly typed to match the value on the right</li>
<li>Assigning the value to the variable</li>
</ol>
<p>What we may notice, is that the type of data on the right and left side of the <code>=</code> is the same. Since C++ is strictly typed (e.g. a function which returns a <code>float</code> will always return a <code>float</code> no matter what), it is impossible for the value on the right hand side to ever be anything different. The compiler <strong>knows</strong> what type of value the right hand will give, e.g. it knows that on line 1 that on the right hand side of the <code>=</code> is an <code>ofRectangle</code>. So perhaps if we were to write something like:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">auto</span> myRectangle = ofGetCurrentViewport();
<span class="dt">auto</span> rectangleCenter = myRectangle.getCenter();
<span class="dt">auto</span> rectangleCenterX = rectangleCenter.x;</code></pre>
<p>Then the compiler can do some of the coding for us. In fact, thanks to <code>auto</code>, we can do this now. This code block compiles to exactly the same result as the first code block did. The compiler notices what's on the right hand side and substitutes in the correct type wherever it sees <code>auto</code>.</p>
<h4 id="how-this-helps">How this helps</h4>
<p>Well firstly, auto's going to save you keystrokes. Imagine the following:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp">vector&lt;shared_ptr&lt;ofThread&gt; &gt; myVectorOfThreads;</code></pre>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="co">// the old way</span>
vector&lt;shared_ptr&lt;ofThread&gt;&gt;::iterator firstThreadIterator = <span class="kw">this</span>-&gt;myVectorOfThreads.begin();

<span class="co">// the new way</span>
<span class="dt">auto</span> firstThreadIterator = <span class="kw">this</span>-&gt;myVectorOfThreads.begin();</code></pre>
<p>Now this makes the code more readable (by decent humans), but also you could take advantage of <code>auto</code> in other ways, for example you could make changes things in the h file, and the cpp file code would automatically correct itself. For example in the h you might change the <code>vector</code> to a <code>list</code>, or change <code>shared_ptr&lt;ofThread&gt;</code> to <code>ofThread *</code>. These changes would perpetuate automatically to wherever an <code>auto</code> is listening out in the code. Nifty huh?</p>
<h3 id="watch-out-for-this">Watch out for this</h3>
<h4 id="auto-is-not-a-new-type"><code>auto</code> is not a new type</h4>
<p>Note that the following doesn't work:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">auto</span> myRectangle = ofGetCurrentViewport();
myRectangle = <span class="st">"look mum! i'm a string!!"</span>; <span class="co">// compiler error!</span></code></pre>
<p>Remember that <code>auto</code> isn't a type itself, it's not a magic container that can take any kind of thing (such as <code>var</code> in C# or another dynamic typed language), it is simply a keyword which gets substituted at compile time, you can imagine that the compiler just writes in for you whatever makes sense on that line where it is. In this case, the first line makes sure that <code>myRectangle</code> is an <code>ofRectangle</code>, and you can't assign a <code>string</code> to an <code>ofRectangle</code>.</p>
<h4 id="you-cant-use-auto-in-function-arguments">You can't use <code>auto</code> in function arguments</h4>
<p>Since the <code>auto</code> must be implicitly defined by the line of code where it is used, and that this decision is made at compile time, it can not be a function argument, let's see what that means..</p>
<p>Imagine that the following was valid: (<strong>NOTE</strong> : it isn't!)</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">float</span> multiplyBy2(<span class="dt">auto</span> number) {
	<span class="kw">return</span> number * <span class="dv">2</span>;
}

<span class="dt">int</span> firstNumber = <span class="dv">1</span>;
<span class="dt">float</span> secondNumber = <span class="fl">2.</span>0f;

cout &lt;&lt; multiplyBy2(firstNumber) &lt;&lt; endl;
cout &lt;&lt; multiplyBy2(secondNumber) &lt;&lt; endl;</code></pre>
<p>Now if this code were valid, then the first time the function is called, the <code>auto</code> would mean <code>int</code>, and the second time it would mean <code>float</code>. Therefore saying that the text <code>auto</code> is simply substituted with an explicit type where it is written doesn't make sense. So basically <strong>you can't use <code>auto</code> in function arguments</strong> (you might want to look into <code>template</code> instead, which would automatically generate 2 pieces of code for the 2 different types).</p>
<h4 id="you-cant-use-auto-as-a-function-return-type">You can't use <code>auto</code> as a function return type</h4>
<p>I'm not sure why, you just can't. It kinda makes sense that you should be able to, but you just can't, I don't make the rules...</p>
<h3 id="const-and-references"><code>const</code> and references</h3>
<p>Let's do a <code>const auto</code>:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp">ofRectangle rectangle = ofGetCurrentViewport();
<span class="co">//is the same as</span>
<span class="dt">auto</span> rectangle = ofGetCurrentViewport();

<span class="co">//and</span>
<span class="dt">const</span> ofRectangle rectangle = ofGetCurrentViewport();
<span class="co">//is the same as</span>
<span class="dt">const</span> <span class="dt">auto</span> rectangle = ofGetCurrentViewport();</code></pre>
<p>Next look at <code>auto &amp;</code> for when we want reference types.</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">float</span> x = rectangle.x;
<span class="co">//is the same as</span>
<span class="dt">auto</span> x = rectangle.x;

<span class="co">//and</span>

<span class="dt">float</span> &amp; x = rectangle.x;
<span class="co">//is the same as</span>
<span class="dt">auto</span> &amp; x = rectangle.x;</code></pre>
<h3 id="summary">Summary</h3>
<ul>
<li>Save keystrokes by using <code>auto</code> in variable declarations</li>
<li><code>auto</code> takes the type of the right hand side of the <code>=</code> assignment, and replaces the text <code>auto</code> with that type at compile time.</li>
<li><code>auto</code> is not a magic container which can carry any type of data, it simply gets replaced at compile time by whatever is implied in the code</li>
<li>You can't use <code>auto</code> in function arguments, return types and a few other places.</li>
<li>Use <code>const auto</code> for a const type, and <code>auto &amp;</code> for a reference type</li>
</ul>
<h2 id="forthingthings"><code>for (thing : things)</code></h2>
<p>Consider the following common pattern:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp">vector&lt;ofPixels&gt; mySelfies;
<span class="co">/*</span>
<span class="co">take some lovely snaps</span>
<span class="co">*/</span>

<span class="co">//oh dear, my photos are all in portrait</span>
<span class="kw">for</span>(<span class="dt">int</span> i=<span class="dv">0</span>; i&lt;mySelfies.size(); i++) {
	<span class="co">//rotate them from landscape to portrait</span>
	mySelfies[i].rotate90(<span class="dv">1</span>);
}

vector&lt;ofxSnapChat::Friend&gt; myFriends = snapChatClient.getFriends();

<span class="co">//now let's send them to all my friends</span>
<span class="kw">for</span>(<span class="dt">int</span> i=<span class="dv">0</span>; i&lt;myFriends.size(); i++) {
	<span class="kw">if</span> (myFriends[i].isSingle()) {
		<span class="kw">for</span>(<span class="dt">int</span> i=<span class="dv">0</span>; i&lt;mySelfies.size(); i++) {
			myFriends[i].sendImage(mySelfies[i]);
		}
	}
}</code></pre>
<p>Well we're forever doing things like <code>for(int i=0; i&lt;mySelfies.size(); i++) {</code>, so let's see if we can find a neater way of doing this with <code>for thing in things</code> which in C++11 we can write as <code>for (thing : things)</code>...</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp">vector&lt;ofPixels&gt; mySelfies;
<span class="co">/*</span>
<span class="co">take some lovely snaps</span>
<span class="co">*/</span>

<span class="co">//oh dear, my photos are all in portrait</span>
<span class="kw">for</span>(<span class="dt">auto</span> &amp; mySelfie : mySelfies) {
	<span class="co">//rotate them from landscape to portrait</span>
	mySelfie.rotate90(<span class="dv">1</span>); <span class="co">// (1)</span>
}

<span class="dt">auto</span> myFriends = snapChatClient.getFriends();

<span class="co">//now let's send them to all my friends</span>
<span class="kw">for</span>(<span class="dt">auto</span> &amp; myFriend : myFriends) {
	<span class="kw">if</span> (myFriend.isSingle()) {
		<span class="kw">for</span>(<span class="dt">auto</span> &amp; mySelfie : mySelfies) {
			myFriend.sendImage(mySelfie); <span class="co">// (2)</span>
		}
	}
}</code></pre>
<p>Notice that <code>for(thing : things)</code> gels so well with <code>auto</code>. Also notice that I'm using <code>auto &amp;</code> since:</p>
<ul>
<li>At <code>(1)</code> I want to be able to change the contents of the vector, so I need a reference to the vector item rather than a copy of it.</li>
<li>At <code>(2)</code>, it makes more sense to use a reference rather than a copy because it's computationally cheaper, and means I don't have to allocate new instances of <code>ofxSnapChat::Friend</code> (which I presume is quite a complex object, since it can do things like send images over the internet).</li>
</ul>
<h3 id="summary-1">Summary</h3>
<ul>
<li>Use <code>for(auto thing : vectorOfThings)</code></li>
<li>This works with all the STL containers (<code>vector</code>, <code>map</code>, <code>list</code>, <code>deque</code>, <code>set</code>, etc) and in some more purpose built containers (e.g. <code>ofxGrayCode::DataSet</code>)</li>
<li>Often you'll want to do <code>for(auto &amp; thing : vectorOfThings)</code> to use a reference rather than a copy</li>
</ul>
<h2 id="override">override</h2>
<p><code>override</code> saves you time not by reducing the amount of typing you do, but by reducing the amount of head-scratching you might do when dealing with <code>virtual</code> functions. Imagine the following:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">class</span> BuildingProjectionMapper {
<span class="kw">public</span>:
<span class="co">//...</span>
    <span class="kw">virtual</span> <span class="dt">void</span> mapTheNeoClassicalColumns();
<span class="co">//...</span>
};

<span class="kw">class</span> AutoBuildingProjectionMapper : <span class="kw">public</span> BuildingProjectionMapper {
<span class="kw">public</span>:
	<span class="dt">void</span> mapTheNeoClassicalColums(); <span class="co">// woops, I spelt column incorrectly</span>
};</code></pre>
<p>Now if I implement <code>AutoBuildingProjectionMapper::mapTheNeoClassicalColums</code>, it may never get called, and I may be wondering why my function calls are all being handled by the base class. The problem is that the compiler never told me that the function that I was trying to override didn't exist. Here comes <code>override</code> to the rescue.</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">class</span> AutoBuildingProjectionMapper : <span class="kw">public</span> BuildingProjectionMapper {
<span class="kw">public</span>:
	<span class="dt">void</span> mapTheNeoClassicalColums() <span class="kw">override</span>;
};</code></pre>
<p>This tells the compiler that I'm intending to override a <code>virtual</code> function. In this case, the compiler will tell me that no <code>virtual</code> function called <code>mapTheNeoClassicalColums</code> exists, and that therefore my <code>override</code> is faulty. So following the compiler's complaint I can go in and fix the spelling mistake. Then I can get on with making my Projection Mappening on the town library facade.</p>
<p>This is especially useful when you make changes to your base class, e.g. in oF 0.9.0, many base classes have changed, and by using <code>override</code> in addons, addon authors can be hard-notified that their code is now invalid and needs updating.</p>
<h3 id="summary-2">Summary</h3>
<ul>
<li>Use the keyword <code>override</code> at the end of function definitions in a derived class' h file when you are intending to override a <code>virtual</code> function in the base <code>class</code></li>
<li>The compiler will warn you if your <code>override</code> is invalid, which might just save you a lot of time hunting for errors</li>
</ul>
<h2 id="lambdafunctions">Lambda functions</h2>
<p>This one is a little more complex. Rather than making things quicker or safer to write, it adds a new feature to the way you can design your code. As such, we'll introduce the basics of what they do, then make some interesting examples.</p>
<p>Lambda functions are very common in JavaScript, C# and other modern languages, and can be very liberating to use. They can seem more scary than they really are, so I suggest just getting on with some examples to start with. Let's make a simple example:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">void</span> kateBushFunction() {
	cout &lt;&lt; <span class="st">"Heathcliff, it's me Cathy."</span> &lt;&lt; endl;
}

<span class="dt">void</span> changePopMusicForever() {
    <span class="dt">auto</span> kateBushLambdaFunction = []() {
        cout &lt;&lt; <span class="st">"So cold. Let me into your window."</span> &lt;&lt; endl;
    };
	kateBushFunction();
	kateBushLambdaFunction();
}</code></pre>
<p>Let's take a guess what happens here. Yep, we get:</p>
<pre><code>Heathcliff, it's me Cathy.
So cold. Let me into your window.</code></pre>
<p>So the lambda function is just like a normal function, but the biggest differences are that:</p>
<ol style="list-style-type: decimal">
<li>The function is defined within the executable code of another function (in this case <code>kateBushLambdaFunction</code> is defined inside <code>changePopMusicForever</code>).</li>
<li>The function is now also a variable</li>
</ol>
<p>That second one is where the lambda function really comes into its own. Because we can pass it around, store it, throw it away, copy it. Let's make a more concrete example of this.</p>
<h3 id="passing-lambda-functions-as-variables">Passing lambda functions as variables</h3>
<p>When we want to pass a lambda function as a variable, we need to introduce a type which can hold that data (since we can't use <code>auto</code> in function arguments or when defining members of classes). A common type which can store a lambda function is <code>std::function&lt;void()&gt;</code>. I understand that <code>void()</code> looks a bit funny at first, but it will make sense when we do a bit more with lambdas later on.</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">class</span> Graphic {
<span class="kw">public</span>:
    <span class="dt">void</span> draw() {
        whatToDraw();
    }

    std::function&lt;<span class="dt">void</span>()&gt; whatToDraw;
};

<span class="kw">class</span> ofApp : ofBaseApp {
<span class="co">/*</span>
<span class="co">.. all the usual stuff</span>
<span class="co">*/</span>
<span class="kw">protected</span>:
	vector&lt;Graphic&gt; graphicElements;
};</code></pre>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">void</span> ofApp::setup() {
	Graphic circle;
	circle.whatToDraw = []() {
		ofDrawCircle(<span class="dv">50</span>,<span class="dv">50</span>,<span class="dv">20</span>);
	};
	<span class="kw">this</span>-&gt;graphicElements.push_back(circle);

	Graphic rectangle;
	rectangle.whatToDraw = []() {
		ofRect(<span class="dv">50</span>,<span class="dv">50</span>,<span class="dv">200</span>,<span class="dv">200</span>);
	};
	<span class="kw">this</span>-&gt;graphicElements.push_back(rectangle);
}

<span class="dt">void</span> ofApp::draw() {
	<span class="kw">for</span>(<span class="dt">auto</span> &amp; graphic : <span class="kw">this</span>-&gt;graphicElements) {
		graphic.draw();
	}
}</code></pre>
<p>We could do this by creating classes which inherit from <code>Graphic</code> and override the <code>draw</code> function (e.g. <code>CircleGraphic</code> and <code>RectangleGraphic</code>). But instead of defining new classes, we've created 2 instances of Graphic which contain different function definitions by using lambda functions. This is convenient as it's often a pain to make new class definitions when we just want to change a little bit of functionality of a class.</p>
<h3 id="arguments-scope-and-return-types">Arguments, scope and return types</h3>
<p>Now how about getting variables in and out of the function? A common pattern with normal functions is using function arguments to get variables into the function, and returning variables to get values out again. Let's see how that works with lambdas.</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">float</span> multiplyByTwoFunction(<span class="dt">float</span> x) {
	<span class="kw">return</span> x * <span class="fl">2.</span>0f;
}

<span class="dt">void</span> test() {
	<span class="dt">auto</span> multiplyByTwoLambda = [](<span class="dt">float</span> x) {
		<span class="kw">return</span> x * <span class="fl">2.</span>0f;
	};

	cout &lt;&lt; multiplyByTwoFunction(<span class="fl">2.</span>0f) &lt;&lt; endl;
	cout &lt;&lt; multiplyByTwoLambda(<span class="fl">2.</span>0f) &lt;&lt; endl;
}</code></pre>
<p>This would of course print out:</p>
<pre><code>4
4</code></pre>
<p>That's great! But we also have to be careful that because this function now has a float return type and a float argument, it is a different type of function to <code>kateBushLambdaFunction</code>. Note that if we want to pass this function as an argument we'd need to do like:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">void</span> performActionOnFloat(<span class="dt">float</span> &amp; x, std::function&lt;<span class="dt">float</span>(<span class="dt">float</span>)&gt; action) {
	x = action(x);
}</code></pre>
<p>Specifically, the type which can hold a lambda function is:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp">std::function&lt;<span class="kw">return</span> type(arguments)&gt;</code></pre>
<p>You can use multiple arguments (like you can with normal functions).</p>
<h3 id="scope">Scope</h3>
<p>Finally, we often need to introduce a 'scope' to the lambda function. The scope means what variables from outside the function can be seen inside the function. We define the scope in-between the <code>[]</code>s in the lambda function definition, for example:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="dt">float</span> multiplier = <span class="fl">4.</span>0f;
<span class="dt">auto</span> multiplyByOurMultiplier = [multiplier](<span class="dt">float</span> x) { <span class="co">// (1)</span>
	<span class="kw">return</span> x * multiplier;
}
cout &lt;&lt; multiplyByOurMultiplier(<span class="fl">2.</span>0f); <span class="co">// prints 8</span></code></pre>
<p>By putting the variable name <code>multiplier</code> within the <code>[]</code>s of the lambda function definition at <code>(1)</code>, we now can use the variable <code>multiplier</code> within the function definition. A really handy thing to put there is <code>[this]</code> which puts <code>this</code> within the scope of the function, i.e. makes all the members of the current class available from within the function.</p>
<p>You can: * Add multiple variables to the scope, e.g. <code>[this, multiplier]</code> * Add variables as references (rather than copies) to the scope, e.g.: <code>[&amp;multiplier]</code> * Automatically add any variables to the scope which you use inside the function using <code>[=]</code> (make a copy of the variable at the function definition) or <code>[&amp;]</code> (use a reference to the variable).</p>
<h3 id="summary-so-far">Summary so far</h3>
<ul>
<li>Lambda functions let you define functions in your code which are stored in variables</li>
<li>Lambda functions can be passed around between functions, classes, stored variables and <code>vector</code>s, etc. Basically, anything you can do with a variable you can do with a lambda function.</li>
<li>You can return variables from lambda functions and specify arguments for the function</li>
<li>You can define what is available inside the scope of the function using <code>[=]</code>, <code>[&amp;]</code>, <code>[this]</code>, <code>[myVariableName]</code>, <code>[&amp;myVariableName]</code>, etc.</li>
</ul>
<h3 id="worker-thread-example">Worker thread example</h3>
<p>Now let's go for a more down-deep example of how you might use lambda functions to save <s>the world</s> you from getting bogged down. In this example we have a class which talks to a camera device. The particular thing about this camera device is that the camera must run in its own thread, and all operations on the camera must run in that thread.</p>
<p>Imagine our ofApp looks like:</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">class</span> ofApp : <span class="kw">public</span> ofBaseApp {
	<span class="co">/*</span>
<span class="co">	the usual stuff</span>
<span class="co">	*/</span>

	CameraClass camera;
	ofParameter&lt;<span class="dt">float</span>&gt; exposure;
}

<span class="kw">class</span> CameraClass : <span class="kw">public</span> ofThread {
<span class="kw">protected</span>:
	<span class="dt">void</span> threadedFunction() <span class="kw">override</span> {
		<span class="kw">while</span> (<span class="kw">this</span>-&gt;isCameraRunning()) {
			<span class="kw">this</span>-&gt;device.getFrame();
			<span class="kw">this</span>-&gt;pixelsLock.lock();
			<span class="kw">this</span>-&gt;pixels.setFromExternalPixels(<span class="kw">this</span>-&gt;device-&gt;getData(), <span class="dv">640</span>, <span class="dv">480</span>, <span class="dv">3</span>);
			<span class="kw">this</span>-&gt;pixelsLock.unlock();
			<span class="co">// (1)</span>
		}
	}

	CameraDriver device;
	ofPixels pixels;
	ofMutex pixelsLock;
}</code></pre>
<p>Now if we want a way to set the exposure on the camera from our <code>ofApp</code> we need to signal this to the <code>CameraClass</code>, and have it set the exposure in the right thread (e.g. at (1) which happens between grabbing frames from the camera).</p>
<p>One way of doing this would be to store some data saying that we needed to change the exposure, and what that new exposure value is. Then at (1) we would need to check for that data and have the code to act on it appropriately. The problem with that is that it's really laborious and introduces lots of special cases (e.g. what if something had to read the gain and then change the exposure accordingly?).</p>
<p>A nice workaround is to use lambda functions for this purpose, e.g. :</p>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="kw">class</span> CameraClass : <span class="kw">public</span> ofThread {
<span class="kw">protected</span>:
	<span class="dt">void</span> threadedFunction() <span class="kw">override</span> {
		<span class="kw">while</span> (<span class="kw">this</span>-&gt;isCameraRunning()) {
			<span class="kw">this</span>-&gt;device.getFrame();
			<span class="kw">this</span>-&gt;pixelsLock.lock();
			<span class="kw">this</span>-&gt;pixels.setFromExternalPixels(<span class="kw">this</span>-&gt;device-&gt;getData(), <span class="dv">640</span>, <span class="dv">480</span>, <span class="dv">3</span>);
			<span class="kw">this</span>-&gt;pixelsLock.unlock();

			<span class="kw">this</span>-&gt;actionsLock.lock();
			<span class="kw">for</span>(<span class="dt">auto</span> &amp; action : <span class="kw">this</span>-&gt;actions) {
				action(<span class="kw">this</span>-&gt;device);
			}
			<span class="kw">this</span>-&gt;actions.clear();
			<span class="kw">this</span>-&gt;actionsLock.unlock();
		}
	}

	<span class="dt">void</span> performInThread(std::function&lt;<span class="dt">void</span>(CameraDriver&amp;)&gt; action) {
		<span class="kw">this</span>-&gt;actionsLock.lock();
		<span class="kw">this</span>-&gt;actions.push_back(action);
		<span class="kw">this</span>-&gt;actionsLock.unlock();
	}

	CameraDriver device;
	ofPixels pixels;
	ofMutex pixelsLock;

	vector&lt;std::function&lt;<span class="dt">void</span>(CameraDriver&amp;)&gt; &gt; actions;
	ofMutex actionsLock;
}</code></pre>
<pre class="sourceCode cpp"><code class="sourceCode cpp"><span class="co">//somewhere in ofApp</span>

<span class="kw">this</span>-&gt;camera-&gt;performInThread([<span class="kw">this</span>](CameraDriver &amp; device) {
	device.setExposure(<span class="kw">this</span>-&gt;exposure);
});</code></pre>
<p>This will then push the instruction into CameraClass, so that at the right time this function is called within the thread managing the camera, taking the <code>this-&gt;exposure</code> variable from the <code>ofApp</code> and acting on the <code>CameraDriver</code> defined in <code>CameraClass</code>. All this happens without having to pass lots of variables around, in a really flexible way. To see how this is implemented in ofxMachineVision, check out the <code>ofxMachineVision::Utils::ActionQueueThread</code> at https://github.com/elliotwoods/ofxMachineVision/blob/master/src/ofxMachineVision/Utils/ActionQueueThread.cpp .</p>
<div class="footer">
<div id="prev_chapter"><a href="stl_map.html">&lt; let's play with Map, std::map</a></div>
<div id="next_chapter"><a href="math.html">Math: From 1D to 4D &gt;</a></div>
</div>
<div id="help"><i>please note that this book / chapter is a work in progress.  Feel free to suggest edits / corrections <a href="https://github.com/openframeworks/ofbook" target="_blank">here</a></i></div>
</div>
</div>
</body>
</html>
